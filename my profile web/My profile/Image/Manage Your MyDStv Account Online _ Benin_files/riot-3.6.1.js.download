(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(factory((global.riot=global.riot||{})));}(this,(function(exports){'use strict';var __TAGS_CACHE=[];var __TAG_IMPL={};var GLOBAL_MIXIN='__global_mixin';var ATTRS_PREFIX='riot-';var REF_DIRECTIVES=['ref','data-ref'];var IS_DIRECTIVE='data-is';var CONDITIONAL_DIRECTIVE='if';var LOOP_DIRECTIVE='each';var LOOP_NO_REORDER_DIRECTIVE='no-reorder';var SHOW_DIRECTIVE='show';var HIDE_DIRECTIVE='hide';var RIOT_EVENTS_KEY='__riot-events__';var T_STRING='string';var T_OBJECT='object';var T_UNDEF='undefined';var T_FUNCTION='function';var XLINK_NS='http://www.w3.org/1999/xlink';var SVG_NS='http://www.w3.org/2000/svg';var XLINK_REGEX=/^xlink:(\w+)/;var WIN=typeof window===T_UNDEF?undefined:window;var RE_SPECIAL_TAGS=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;var RE_SPECIAL_TAGS_NO_OPTION=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;var RE_EVENTS_PREFIX=/^on/;var RE_RESERVED_NAMES=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/;var RE_HTML_ATTRS=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;var CASE_SENSITIVE_ATTRIBUTES={'viewbox':'viewBox'};var RE_BOOL_ATTRS=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;var IE_VERSION=(WIN&&WIN.document||{}).documentMode|0;function isBoolAttr(value){return RE_BOOL_ATTRS.test(value)}
function isFunction(value){return typeof value===T_FUNCTION}
function isObject(value){return value&&typeof value===T_OBJECT}
function isUndefined(value){return typeof value===T_UNDEF}
function isString(value){return typeof value===T_STRING}
function isBlank(value){return isUndefined(value)||value===null||value===''}
function isArray(value){return Array.isArray(value)||value instanceof Array}
function isWritable(obj,key){var descriptor=Object.getOwnPropertyDescriptor(obj,key);return isUndefined(obj[key])||descriptor&&descriptor.writable}
function isReservedName(value){return RE_RESERVED_NAMES.test(value)}
var check=Object.freeze({isBoolAttr:isBoolAttr,isFunction:isFunction,isObject:isObject,isUndefined:isUndefined,isString:isString,isBlank:isBlank,isArray:isArray,isWritable:isWritable,isReservedName:isReservedName});function $$(selector,ctx){return Array.prototype.slice.call((ctx||document).querySelectorAll(selector))}
function $(selector,ctx){return(ctx||document).querySelector(selector)}
function createFrag(){return document.createDocumentFragment()}
function createDOMPlaceholder(){return document.createTextNode('')}
function isSvg(el){return!!el.ownerSVGElement}
function mkEl(name){return name==='svg'?document.createElementNS(SVG_NS,name):document.createElement(name)}
function setInnerHTML(container,html){if(!isUndefined(container.innerHTML))
{container.innerHTML=html;}
else{var doc=new DOMParser().parseFromString(html,'application/xml');var node=container.ownerDocument.importNode(doc.documentElement,true);container.appendChild(node);}}
function toggleVisibility(dom,show){dom.style.display=show?'':'none';dom['hidden']=show?false:true;}
function remAttr(dom,name){dom.removeAttribute(name);}
function styleObjectToString(style){return Object.keys(style).reduce(function(acc,prop){return(acc+" "+prop+": "+(style[prop])+";")},'')}
function getAttr(dom,name){return dom.getAttribute(name)}
function setAttr(dom,name,val){var xlink=XLINK_REGEX.exec(name);if(xlink&&xlink[1])
{dom.setAttributeNS(XLINK_NS,xlink[1],val);}
else
{dom.setAttribute(name,val);}}
function safeInsert(root,curr,next){root.insertBefore(curr,next.parentNode&&next);}
function walkAttrs(html,fn){if(!html)
{return}
var m;while(m=RE_HTML_ATTRS.exec(html))
{fn(m[1].toLowerCase(),m[2]||m[3]||m[4]);}}
function walkNodes(dom,fn,context){if(dom){var res=fn(dom,context);var next;if(res===false){return}
dom=dom.firstChild;while(dom){next=dom.nextSibling;walkNodes(dom,fn,res);dom=next;}}}
var dom=Object.freeze({$$:$$,$:$,createFrag:createFrag,createDOMPlaceholder:createDOMPlaceholder,isSvg:isSvg,mkEl:mkEl,setInnerHTML:setInnerHTML,toggleVisibility:toggleVisibility,remAttr:remAttr,styleObjectToString:styleObjectToString,getAttr:getAttr,setAttr:setAttr,safeInsert:safeInsert,walkAttrs:walkAttrs,walkNodes:walkNodes});var styleNode;var cssTextProp;var byName={};var remainder=[];var needsInject=false;if(WIN){styleNode=(function(){var newNode=mkEl('style');setAttr(newNode,'type','text/css');var userNode=$('style[type=riot]');if(userNode){if(userNode.id){newNode.id=userNode.id;}
userNode.parentNode.replaceChild(newNode,userNode);}
else{document.getElementsByTagName('head')[0].appendChild(newNode);}
return newNode})();cssTextProp=styleNode.styleSheet;}
var styleManager={styleNode:styleNode,add:function add(css,name){if(name){byName[name]=css;}
else{remainder.push(css);}
needsInject=true;},inject:function inject(){if(!WIN||!needsInject){return}
needsInject=false;var style=Object.keys(byName).map(function(k){return byName[k]}).concat(remainder).join('\n');if(cssTextProp){cssTextProp.cssText=style;}
else{styleNode.innerHTML=style;}}};var skipRegex=(function(){var beforeReChars='[{(,;:?=|&!^~>%*/';var beforeReWords=['case','default','do','else','in','instanceof','prefix','return','typeof','void','yield'];var wordsLastChar=beforeReWords.reduce(function(s,w){return s+w.slice(-1)},'');var RE_REGEX=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/;var RE_VN_CHAR=/[$\w]/;function prev(code,pos){while(--pos>=0&&/\s/.test(code[pos])){}
return pos}
function _skipRegex(code,start){var re=/.*/g;var pos=re.lastIndex=start++;var match=re.exec(code)[0].match(RE_REGEX);if(match){var next=pos+match[0].length;pos=prev(code,pos);var c=code[pos];if(pos<0||~beforeReChars.indexOf(c)){return next}
if(c==='.'){if(code[pos-1]==='.'){start=next;}}else if(c==='+'||c==='-'){if(code[--pos]!==c||(pos=prev(code,pos))<0||!RE_VN_CHAR.test(code[pos])){start=next;}}else if(~wordsLastChar.indexOf(c)){var end=pos+1;while(--pos>=0&&RE_VN_CHAR.test(code[pos])){}
if(~beforeReWords.indexOf(code.slice(pos+1,end))){start=next;}}}
return start}
return _skipRegex})();var brackets=(function(UNDEF){var
REGLOB='g',R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,R_STRINGS=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,S_QBLOCKS=R_STRINGS.source+'|'+
/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+'|'+
/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,UNSUPPORTED=RegExp('[\\'+'x00-\\x1F<>a-zA-Z0-9\'",;\\\\]'),NEED_ESCAPE=/(?=[[\]()*+?.^$|])/g,S_QBLOCK2=R_STRINGS.source+'|'+/(\/)(?![*\/])/.source,FINDBRACES={'(':RegExp('([()])|'+S_QBLOCK2,REGLOB),'[':RegExp('([[\\]])|'+S_QBLOCK2,REGLOB),'{':RegExp('([{}])|'+S_QBLOCK2,REGLOB)},DEFAULT='{ }';var _pairs=['{','}','{','}',/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp('\\\\(})|([[({])|(})|'+S_QBLOCK2,REGLOB),DEFAULT,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var
cachedBrackets=UNDEF,_regex,_cache=[],_settings;function _loopback(re){return re}
function _rewrite(re,bp){if(!bp){bp=_cache;}
return new RegExp(re.source.replace(/{/g,bp[2]).replace(/}/g,bp[3]),re.global?REGLOB:'')}
function _create(pair){if(pair===DEFAULT){return _pairs}
var arr=pair.split(' ');if(arr.length!==2||UNSUPPORTED.test(pair)){throw new Error('Unsupported brackets "'+pair+'"')}
arr=arr.concat(pair.replace(NEED_ESCAPE,'\\').split(' '));arr[4]=_rewrite(arr[1].length>1?/{[\S\s]*?}/:_pairs[4],arr);arr[5]=_rewrite(pair.length>3?/\\({|})/g:_pairs[5],arr);arr[6]=_rewrite(_pairs[6],arr);arr[7]=RegExp('\\\\('+arr[3]+')|([[({])|('+arr[3]+')|'+S_QBLOCK2,REGLOB);arr[8]=pair;return arr}
function _brackets(reOrIdx){return reOrIdx instanceof RegExp?_regex(reOrIdx):_cache[reOrIdx]}
_brackets.split=function split(str,tmpl,_bp){if(!_bp){_bp=_cache;}
var
parts=[],match,isexpr,start,pos,re=_bp[6];var qblocks=[];var prevStr='';var mark,lastIndex;isexpr=start=re.lastIndex=0;while((match=re.exec(str))){lastIndex=re.lastIndex;pos=match.index;if(isexpr){if(match[2]){var ch=match[2];var rech=FINDBRACES[ch];var ix=1;rech.lastIndex=lastIndex;while((match=rech.exec(str))){if(match[1]){if(match[1]===ch){++ix;}
else if(!--ix){break}}else{rech.lastIndex=pushQBlock(match.index,rech.lastIndex,match[2]);}}
re.lastIndex=ix?str.length:rech.lastIndex;continue}
if(!match[3]){re.lastIndex=pushQBlock(pos,lastIndex,match[4]);continue}}
if(!match[1]){unescapeStr(str.slice(start,pos));start=re.lastIndex;re=_bp[6+(isexpr^=1)];re.lastIndex=start;}}
if(str&&start<str.length){unescapeStr(str.slice(start));}
parts.qblocks=qblocks;return parts
function unescapeStr(s){if(prevStr){s=prevStr+s;prevStr='';}
if(tmpl||isexpr){parts.push(s&&s.replace(_bp[5],'$1'));}else{parts.push(s);}}
function pushQBlock(_pos,_lastIndex,slash){if(slash){_lastIndex=skipRegex(str,_pos);}
if(tmpl&&_lastIndex>_pos+2){mark='\u2057'+qblocks.length+'~';qblocks.push(str.slice(_pos,_lastIndex));prevStr+=str.slice(start,_pos)+mark;start=_lastIndex;}
return _lastIndex}};_brackets.hasExpr=function hasExpr(str){return _cache[4].test(str)};_brackets.loopKeys=function loopKeys(expr){var m=expr.match(_cache[9]);return m?{key:m[1],pos:m[2],val:_cache[0]+m[3].trim()+_cache[1]}:{val:expr.trim()}};_brackets.array=function array(pair){return pair?_create(pair):_cache};function _reset(pair){if((pair||(pair=DEFAULT))!==_cache[8]){_cache=_create(pair);_regex=pair===DEFAULT?_loopback:_rewrite;_cache[9]=_regex(_pairs[9]);}
cachedBrackets=pair;}
function _setSettings(o){var b;o=o||{};b=o.brackets;Object.defineProperty(o,'brackets',{set:_reset,get:function(){return cachedBrackets},enumerable:true});_settings=o;_reset(b);}
Object.defineProperty(_brackets,'settings',{set:_setSettings,get:function(){return _settings}});_brackets.settings=typeof riot!=='undefined'&&riot.settings||{};_brackets.set=_reset;_brackets.skipRegex=skipRegex;_brackets.R_STRINGS=R_STRINGS;_brackets.R_MLCOMMS=R_MLCOMMS;_brackets.S_QBLOCKS=S_QBLOCKS;_brackets.S_QBLOCK2=S_QBLOCK2;return _brackets})();var tmpl=(function(){var _cache={};function _tmpl(str,data){if(!str){return str}
return(_cache[str]||(_cache[str]=_create(str))).call(data,_logErr.bind({data:data,tmpl:str}))}
_tmpl.hasExpr=brackets.hasExpr;_tmpl.loopKeys=brackets.loopKeys;_tmpl.clearCache=function(){_cache={};};_tmpl.errorHandler=null;function _logErr(err,ctx){err.riotData={tagName:ctx&&ctx.__&&ctx.__.tagName,_riot_id:ctx&&ctx._riot_id};if(_tmpl.errorHandler){_tmpl.errorHandler(err);}
else if(typeof console!=='undefined'&&typeof console.error==='function'){}}
function _create(str){var expr=_getTmpl(str);if(expr.slice(0,11)!=='try{return '){expr='return '+expr;}
return new Function('E',expr+';')}
var RE_DQUOTE=/\u2057/g;var RE_QBMARK=/\u2057(\d+)~/g;function _getTmpl(str){var parts=brackets.split(str.replace(RE_DQUOTE,'"'),1);var qstr=parts.qblocks;var expr;if(parts.length>2||parts[0]){var i,j,list=[];for(i=j=0;i<parts.length;++i){expr=parts[i];if(expr&&(expr=i&1?_parseExpr(expr,1,qstr):'"'+expr.replace(/\\/g,'\\\\').replace(/\r\n?|\n/g,'\\n').replace(/"/g,'\\"')+
'"')){list[j++]=expr;}}
expr=j<2?list[0]:'['+list.join(',')+'].join("")';}else{expr=_parseExpr(parts[1],0,qstr);}
if(qstr.length){expr=expr.replace(RE_QBMARK,function(_,pos){return qstr[pos].replace(/\r/g,'\\r').replace(/\n/g,'\\n')});}
return expr}
var RE_CSNAME=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/;var
RE_BREND={'(':/[()]/g,'[':/[[\]]/g,'{':/[{}]/g};function _parseExpr(expr,asText,qstr){expr=expr.replace(/\s+/g,' ').trim().replace(/\ ?([[\({},?\.:])\ ?/g,'$1');if(expr){var
list=[],cnt=0,match;while(expr&&(match=expr.match(RE_CSNAME))&&!match.index){var
key,jsb,re=/,|([[{(])|$/g;expr=RegExp.rightContext;key=match[2]?qstr[match[2]].slice(1,-1).trim().replace(/\s+/g,' '):match[1];while(jsb=(match=re.exec(expr))[1]){skipBraces(jsb,re);}
jsb=expr.slice(0,match.index);expr=RegExp.rightContext;list[cnt++]=_wrapExpr(jsb,1,key);}
expr=!cnt?_wrapExpr(expr,asText):cnt>1?'['+list.join(',')+'].join(" ").trim()':list[0];}
return expr
function skipBraces(ch,re){var
mm,lv=1,ir=RE_BREND[ch];ir.lastIndex=re.lastIndex;while(mm=ir.exec(expr)){if(mm[0]===ch){++lv;}
else if(!--lv){break}}
re.lastIndex=lv?expr.length:ir.lastIndex;}}
var
JS_CONTEXT='"in this?this:'+(typeof window!=='object'?'global':'window')+').',JS_VARNAME=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,JS_NOPROPS=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function _wrapExpr(expr,asText,key){var tb;expr=expr.replace(JS_VARNAME,function(match,p,mvar,pos,s){if(mvar){pos=tb?0:pos+match.length;if(mvar!=='this'&&mvar!=='global'&&mvar!=='window'){match=p+'("'+mvar+JS_CONTEXT+mvar;if(pos){tb=(s=s[pos])==='.'||s==='('||s==='[';}}else if(pos){tb=!JS_NOPROPS.test(s.slice(pos));}}
return match});if(tb){expr='try{return '+expr+'}catch(e){E(e,this)}';}
if(key){expr=(tb?'function(){'+expr+'}.call(this)':'('+expr+')')+'?"'+key+'":""';}else if(asText){expr='function(v){'+(tb?expr.replace('return ','v='):'v=('+expr+')')+';return v||v===0?v:""}.call(this)';}
return expr}
_tmpl.version=brackets.version='v3.0.8';return _tmpl})();var observable$1=function(el){el=el||{};var callbacks={},slice=Array.prototype.slice;Object.defineProperties(el,{on:{value:function(event,fn){if(typeof fn=='function')
{(callbacks[event]=callbacks[event]||[]).push(fn);}
return el},enumerable:false,writable:false,configurable:false},off:{value:function(event,fn){if(event=='*'&&!fn){callbacks={};}
else{if(fn){var arr=callbacks[event];for(var i=0,cb;cb=arr&&arr[i];++i){if(cb==fn){arr.splice(i--,1);}}}else{delete callbacks[event];}}
return el},enumerable:false,writable:false,configurable:false},one:{value:function(event,fn){function on(){el.off(event,on);fn.apply(el,arguments);}
return el.on(event,on)},enumerable:false,writable:false,configurable:false},trigger:{value:function(event){var arguments$1=arguments;var arglen=arguments.length-1,args=new Array(arglen),fns,fn,i;for(i=0;i<arglen;i++){args[i]=arguments$1[i+1];}
fns=slice.call(callbacks[event]||[],0);for(i=0;fn=fns[i];++i){fn.apply(el,args);}
if(callbacks['*']&&event!='*')
{el.trigger.apply(el,['*',event].concat(args));}
return el},enumerable:false,writable:false,configurable:false}});return el};function each(list,fn){var len=list?list.length:0;var i=0;for(;i<len;++i){fn(list[i],i);}
return list}
function contains(array,item){return array.indexOf(item)!==-1}
function toCamel(str){return str.replace(/-(\w)/g,function(_,c){return c.toUpperCase();})}
function startsWith(str,value){return str.slice(0,value.length)===value}
function defineProperty(el,key,value,options){Object.defineProperty(el,key,extend({value:value,enumerable:false,writable:false,configurable:true},options));return el}
function extend(src){var obj,args=arguments;for(var i=1;i<args.length;++i){if(obj=args[i]){for(var key in obj){if(isWritable(src,key))
{src[key]=obj[key];}}}}
return src}
var misc=Object.freeze({each:each,contains:contains,toCamel:toCamel,startsWith:startsWith,defineProperty:defineProperty,extend:extend});var settings$1=extend(Object.create(brackets.settings),{skipAnonymousTags:true,autoUpdate:true});function handleEvent(dom,handler,e){var ptag=this.__.parent,item=this.__.item;if(!item)
{while(ptag&&!item){item=ptag.__.item;ptag=ptag.__.parent;}}
if(isWritable(e,'currentTarget')){e.currentTarget=dom;}
if(isWritable(e,'target')){e.target=e.srcElement;}
if(isWritable(e,'which')){e.which=e.charCode||e.keyCode;}
e.item=item;handler.call(this,e);if(!settings$1.autoUpdate){return}
if(!e.preventUpdate){var p=getImmediateCustomParentTag(this);if(p.isMounted){p.update();}}}
function setEventHandler(name,handler,dom,tag){var eventName,cb=handleEvent.bind(tag,dom,handler);dom[name]=null;eventName=name.replace(RE_EVENTS_PREFIX,'');if(!contains(tag.__.listeners,dom)){tag.__.listeners.push(dom);}
if(!dom[RIOT_EVENTS_KEY]){dom[RIOT_EVENTS_KEY]={};}
if(dom[RIOT_EVENTS_KEY][name]){dom.removeEventListener(eventName,dom[RIOT_EVENTS_KEY][name]);}
dom[RIOT_EVENTS_KEY][name]=cb;dom.addEventListener(eventName,cb,false);}
function updateDataIs(expr,parent,tagName){var conf,isVirtual,head,ref;if(expr.tag&&expr.tagName===tagName){expr.tag.update();return}
isVirtual=expr.dom.tagName==='VIRTUAL';if(expr.tag){if(isVirtual){head=expr.tag.__.head;ref=createDOMPlaceholder();head.parentNode.insertBefore(ref,head);}
expr.tag.unmount(true);}
if(!isString(tagName)){return}
expr.impl=__TAG_IMPL[tagName];conf={root:expr.dom,parent:parent,hasImpl:true,tagName:tagName};expr.tag=initChildTag(expr.impl,conf,expr.dom.innerHTML,parent);each(expr.attrs,function(a){return setAttr(expr.tag.root,a.name,a.value);});expr.tagName=tagName;expr.tag.mount();if(isVirtual)
{makeReplaceVirtual(expr.tag,ref||expr.tag.root);}
parent.__.onUnmount=function(){var delName=expr.tag.opts.dataIs,tags=expr.tag.parent.tags,_tags=expr.tag.__.parent.tags;arrayishRemove(tags,delName,expr.tag);arrayishRemove(_tags,delName,expr.tag);expr.tag.unmount();};}
function normalizeAttrName(attrName){if(!attrName){return null}
attrName=attrName.replace(ATTRS_PREFIX,'');if(CASE_SENSITIVE_ATTRIBUTES[attrName]){attrName=CASE_SENSITIVE_ATTRIBUTES[attrName];}
return attrName}
function updateExpression(expr){if(this.root&&getAttr(this.root,'virtualized')){return}
var dom=expr.dom,attrName=normalizeAttrName(expr.attr),isToggle=contains([SHOW_DIRECTIVE,HIDE_DIRECTIVE],attrName),isVirtual=expr.root&&expr.root.tagName==='VIRTUAL',parent=dom&&(expr.parent||dom.parentNode),isStyleAttr=attrName==='style',isClassAttr=attrName==='class',hasValue,isObj,value;if(expr._riot_id){if(expr.isMounted){expr.update();}else{expr.mount();if(isVirtual){makeReplaceVirtual(expr,expr.root);}}
return}
if(expr.update){return expr.update()}
value=tmpl(expr.expr,isToggle?extend({},Object.create(this.parent),this):this);hasValue=!isBlank(value);isObj=isObject(value);if(isObj){isObj=!isClassAttr&&!isStyleAttr;if(isClassAttr){value=tmpl(JSON.stringify(value),this);}else if(isStyleAttr){value=styleObjectToString(value);}}
if(expr.attr&&(!expr.isAttrRemoved||!hasValue||value===false)){remAttr(dom,expr.attr);expr.isAttrRemoved=true;}
if(expr.bool){value=value?attrName:false;}
if(expr.isRtag){return updateDataIs(expr,this,value)}
if(expr.wasParsedOnce&&expr.value===value){return}
expr.value=value;expr.wasParsedOnce=true;if(isObj&&!isToggle){return}
if(isBlank(value)){value='';}
if(!attrName){value+='';if(parent){expr.parent=parent;if(parent.tagName==='TEXTAREA'){parent.value=value;if(!IE_VERSION){dom.nodeValue=value;}}
else{dom.nodeValue=value;}}
return}
if(isFunction(value)){setEventHandler(attrName,value,dom,this);}else if(isToggle){toggleVisibility(dom,attrName===HIDE_DIRECTIVE?!value:value);}else{if(expr.bool){dom[attrName]=value;}
if(attrName==='value'&&dom.value!==value){dom.value=value;}
if(hasValue&&value!==false){setAttr(dom,attrName,value);}
if(isStyleAttr&&dom.hidden){toggleVisibility(dom,false);}}}
function updateAllExpressions(expressions){each(expressions,updateExpression.bind(this));}
var IfExpr={init:function init(dom,tag,expr){remAttr(dom,CONDITIONAL_DIRECTIVE);this.tag=tag;this.expr=expr;this.stub=createDOMPlaceholder();this.pristine=dom;var p=dom.parentNode;p.insertBefore(this.stub,dom);p.removeChild(dom);return this},update:function update(){this.value=tmpl(this.expr,this.tag);if(this.value&&!this.current){this.current=this.pristine.cloneNode(true);if(this.stub.parentNode!=null){this.stub.parentNode.insertBefore(this.current,this.stub);this.expressions=[];parseExpressions.apply(this.tag,[this.current,this.expressions,true]);}}else if(!this.value&&this.current){unmountAll(this.expressions);if(this.current._tag){this.current._tag.unmount();}else if(this.current.parentNode){this.current.parentNode.removeChild(this.current);}
this.current=null;this.expressions=[];}
if(this.value){updateAllExpressions.call(this.tag,this.expressions);}},unmount:function unmount(){unmountAll(this.expressions||[]);}};var RefExpr={init:function init(dom,parent,attrName,attrValue){this.dom=dom;this.attr=attrName;this.rawValue=attrValue;this.parent=parent;this.hasExp=tmpl.hasExpr(attrValue);return this},update:function update(){var old=this.value;var customParent=this.parent&&getImmediateCustomParentTag(this.parent);var tagOrDom=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?tmpl(this.rawValue,this.parent):this.rawValue;if(!isBlank(old)&&customParent){arrayishRemove(customParent.refs,old,tagOrDom);}
if(!isBlank(this.value)&&isString(this.value)){if(customParent){arrayishAdd(customParent.refs,this.value,tagOrDom,null,this.parent.__.index);}
if(this.value!==old){setAttr(this.dom,this.attr,this.value);}}else{remAttr(this.dom,this.attr);}
if(!this.dom.__ref){this.dom.__ref=tagOrDom;}},unmount:function unmount(){var tagOrDom=this.tag||this.dom;var customParent=this.parent&&getImmediateCustomParentTag(this.parent);if(!isBlank(this.value)&&customParent)
{arrayishRemove(customParent.refs,this.value,tagOrDom);}}};function mkitem(expr,key,val,base){var item=base?Object.create(base):{};item[expr.key]=key;if(expr.pos){item[expr.pos]=val;}
return item}
function unmountRedundant(items,tags){var i=tags.length,j=items.length;while(i>j){i--;remove.apply(tags[i],[tags,i]);}}
function remove(tags,i){tags.splice(i,1);this.unmount();arrayishRemove(this.parent,this,this.__.tagName,true);}
function moveNestedTags(i){var this$1=this;each(Object.keys(this.tags),function(tagName){moveChildTag.apply(this$1.tags[tagName],[tagName,i]);});}
function move(root,nextTag,isVirtual){if(isVirtual)
{moveVirtual.apply(this,[root,nextTag]);}
else
{safeInsert(root,this.root,nextTag.root);}}
function insert(root,nextTag,isVirtual){if(isVirtual)
{makeVirtual.apply(this,[root,nextTag]);}
else
{safeInsert(root,this.root,nextTag.root);}}
function append(root,isVirtual){if(isVirtual)
{makeVirtual.call(this,root);}
else
{root.appendChild(this.root);}}
function _each(dom,parent,expr){remAttr(dom,LOOP_DIRECTIVE);var mustReorder=typeof getAttr(dom,LOOP_NO_REORDER_DIRECTIVE)!==T_STRING||remAttr(dom,LOOP_NO_REORDER_DIRECTIVE),tagName=getTagName(dom),impl=__TAG_IMPL[tagName],parentNode=dom.parentNode,placeholder=createDOMPlaceholder(),child=getTag(dom),ifExpr=getAttr(dom,CONDITIONAL_DIRECTIVE),tags=[],oldItems=[],hasKeys,isLoop=true,isAnonymous=!__TAG_IMPL[tagName],isVirtual=dom.tagName==='VIRTUAL';expr=tmpl.loopKeys(expr);expr.isLoop=true;if(ifExpr){remAttr(dom,CONDITIONAL_DIRECTIVE);}
parentNode.insertBefore(placeholder,dom);parentNode.removeChild(dom);expr.update=function updateEach(){expr.value=tmpl(expr.val,parent);var frag=createFrag(),items=expr.value,isObject$$1=!isArray(items)&&!isString(items),root=placeholder.parentNode;if(!root){return}
if(isObject$$1){hasKeys=items||false;items=hasKeys?Object.keys(items).map(function(key){return mkitem(expr,items[key],key)}):[];}else{hasKeys=false;}
if(ifExpr){items=items.filter(function(item,i){if(expr.key&&!isObject$$1)
{return!!tmpl(ifExpr,mkitem(expr,item,i,parent))}
return!!tmpl(ifExpr,extend(Object.create(parent),item))});}
each(items,function(item,i){var
doReorder=mustReorder&&typeof item===T_OBJECT&&!hasKeys,oldPos=oldItems.indexOf(item),isNew=oldPos===-1,pos=!isNew&&doReorder?oldPos:i,tag=tags[pos],mustAppend=i>=oldItems.length,mustCreate=doReorder&&isNew||!doReorder&&!tag;item=!hasKeys&&expr.key?mkitem(expr,item,i):item;if(mustCreate){tag=new Tag$1(impl,{parent:parent,isLoop:isLoop,isAnonymous:isAnonymous,tagName:tagName,root:dom.cloneNode(isAnonymous),item:item,index:i,},dom.innerHTML);tag.mount();if(mustAppend)
{append.apply(tag,[frag||root,isVirtual]);}
else
{insert.apply(tag,[root,tags[i],isVirtual]);}
if(!mustAppend){oldItems.splice(i,0,item);}
tags.splice(i,0,tag);if(child){arrayishAdd(parent.tags,tagName,tag,true);}}else if(pos!==i&&doReorder){if(contains(items,oldItems[pos])){move.apply(tag,[root,tags[i],isVirtual]);tags.splice(i,0,tags.splice(pos,1)[0]);oldItems.splice(i,0,oldItems.splice(pos,1)[0]);}
if(expr.pos){tag[expr.pos]=i;}
if(!child&&tag.tags){moveNestedTags.call(tag,i);}}
tag.__.item=item;tag.__.index=i;tag.__.parent=parent;if(!mustCreate){tag.update(item);}});unmountRedundant(items,tags);oldItems=items.slice();root.insertBefore(frag,placeholder);};expr.unmount=function(){each(tags,function(t){t.unmount();});};return expr}
function parseExpressions(root,expressions,mustIncludeRoot){var this$1=this;var tree={parent:{children:expressions}};walkNodes(root,function(dom,ctx){var type=dom.nodeType,parent=ctx.parent,attr,expr,tagImpl;if(!mustIncludeRoot&&dom===root){return{parent:parent}}
if(type===3&&dom.parentNode.tagName!=='STYLE'&&tmpl.hasExpr(dom.nodeValue))
{parent.children.push({dom:dom,expr:dom.nodeValue});}
if(type!==1){return ctx}
var isVirtual=dom.tagName==='VIRTUAL';if(attr=getAttr(dom,LOOP_DIRECTIVE)){if(isVirtual){setAttr(dom,'loopVirtual',true);}
parent.children.push(_each(dom,this$1,attr));return false}
if(attr=getAttr(dom,CONDITIONAL_DIRECTIVE)){parent.children.push(Object.create(IfExpr).init(dom,this$1,attr));return false}
if(expr=getAttr(dom,IS_DIRECTIVE)){if(tmpl.hasExpr(expr)){parent.children.push({isRtag:true,expr:expr,dom:dom,attrs:[].slice.call(dom.attributes)});return false}}
tagImpl=getTag(dom);if(isVirtual){if(getAttr(dom,'virtualized')){dom.parentElement.removeChild(dom);}
if(!tagImpl&&!getAttr(dom,'virtualized')&&!getAttr(dom,'loopVirtual'))
{tagImpl={tmpl:dom.outerHTML};}}
if(tagImpl&&(dom!==root||mustIncludeRoot)){if(isVirtual&&!getAttr(dom,IS_DIRECTIVE)){setAttr(dom,'virtualized',true);var tag=new Tag$1({tmpl:dom.outerHTML},{root:dom,parent:this$1},dom.innerHTML);parent.children.push(tag);}else{var conf={root:dom,parent:this$1,hasImpl:true};parent.children.push(initChildTag(tagImpl,conf,dom.innerHTML,this$1));return false}}
parseAttributes.apply(this$1,[dom,dom.attributes,function(attr,expr){if(!expr){return}
parent.children.push(expr);}]);return{parent:parent}},tree);}
function parseAttributes(dom,attrs,fn){var this$1=this;each(attrs,function(attr){if(!attr){return false}
var name=attr.name,bool=isBoolAttr(name),expr;if(contains(REF_DIRECTIVES,name)){expr=Object.create(RefExpr).init(dom,this$1,name,attr.value);}else if(tmpl.hasExpr(attr.value)){expr={dom:dom,expr:attr.value,attr:name,bool:bool};}
fn(attr,expr);});}
var reHasYield=/<yield\b/i;var reYieldAll=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/ig;var reYieldSrc=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/ig;var reYieldDest=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/ig;var rootEls={tr:'tbody',th:'tr',td:'tr',col:'colgroup'};var tblTags=IE_VERSION&&IE_VERSION<10?RE_SPECIAL_TAGS:RE_SPECIAL_TAGS_NO_OPTION;var GENERIC='div';var SVG='svg';function specialTags(el,tmpl,tagName){var
select=tagName[0]==='o',parent=select?'select>':'table>';el.innerHTML='<'+parent+tmpl.trim()+'</'+parent;parent=el.firstChild;if(select){parent.selectedIndex=-1;}else{var tname=rootEls[tagName];if(tname&&parent.childElementCount===1){parent=$(tname,parent);}}
return parent}
function replaceYield(tmpl,html){if(!reHasYield.test(tmpl)){return tmpl}
var src={};html=html&&html.replace(reYieldSrc,function(_,ref,text){src[ref]=src[ref]||text;return ''}).trim();return tmpl.replace(reYieldDest,function(_,ref,def){return src[ref]||def||''}).replace(reYieldAll,function(_,def){return html||def||''})}
function mkdom(tmpl,html,isSvg$$1){var match=tmpl&&tmpl.match(/^\s*<([-\w]+)/),tagName=match&&match[1].toLowerCase(),el=mkEl(isSvg$$1?SVG:GENERIC);tmpl=replaceYield(tmpl,html);if(tblTags.test(tagName))
{el=specialTags(el,tmpl,tagName);}
else
{setInnerHTML(el,tmpl);}
return el}
function Tag$2(el,opts){var ref=this;var name=ref.name;var tmpl=ref.tmpl;var css=ref.css;var attrs=ref.attrs;var onCreate=ref.onCreate;if(!__TAG_IMPL[name]){tag$1(name,tmpl,css,attrs,onCreate);__TAG_IMPL[name].class=this.constructor;}
mountTo(el,name,opts,this);if(css){styleManager.inject();}
return this}
function tag$1(name,tmpl,css,attrs,fn){if(isFunction(attrs)){fn=attrs;if(/^[\w\-]+\s?=/.test(css)){attrs=css;css='';}else
{attrs='';}}
if(css){if(isFunction(css))
{fn=css;}
else
{styleManager.add(css);}}
name=name.toLowerCase();__TAG_IMPL[name]={name:name,tmpl:tmpl,attrs:attrs,fn:fn};return name}
function tag2$1(name,tmpl,css,attrs,fn){if(css){styleManager.add(css,name);}
__TAG_IMPL[name]={name:name,tmpl:tmpl,attrs:attrs,fn:fn};return name}
function mount$1(selector,tagName,opts){var tags=[];var elem,allTags;function pushTagsTo(root){if(root.tagName){var riotTag=getAttr(root,IS_DIRECTIVE),tag;if(tagName&&riotTag!==tagName){riotTag=tagName;setAttr(root,IS_DIRECTIVE,tagName);}
tag=mountTo(root,riotTag||root.tagName.toLowerCase(),opts);if(tag)
{tags.push(tag);}}else if(root.length)
{each(root,pushTagsTo);}}
styleManager.inject();if(isObject(tagName)){opts=tagName;tagName=0;}
if(isString(selector)){selector=selector==='*'?allTags=selectTags():selector+selectTags(selector.split(/, */));elem=selector?$$(selector):[];}
else
{elem=selector;}
if(tagName==='*'){tagName=allTags||selectTags();if(elem.tagName)
{elem=$$(tagName,elem);}
else{var nodeList=[];each(elem,function(_el){return nodeList.push($$(tagName,_el));});elem=nodeList;}
tagName=0;}
pushTagsTo(elem);return tags}
var mixins={};var globals=mixins[GLOBAL_MIXIN]={};var mixins_id=0;function mixin$1(name,mix,g){if(isObject(name)){mixin$1(("__"+(mixins_id++)+"__"),name,true);return}
var store=g?globals:mixins;if(!mix){if(isUndefined(store[name]))
{throw new Error(("Unregistered mixin: "+name))}
return store[name]}
store[name]=isFunction(mix)?extend(mix.prototype,store[name]||{})&&mix:extend(store[name]||{},mix);}
function update$1(){return each(__TAGS_CACHE,function(tag){return tag.update();})}
function unregister$1(name){__TAG_IMPL[name]=null;}
var version$1='v3.6.1';var core=Object.freeze({Tag:Tag$2,tag:tag$1,tag2:tag2$1,mount:mount$1,mixin:mixin$1,update:update$1,unregister:unregister$1,version:version$1});var __uid=0;function updateOpts(isLoop,parent,isAnonymous,opts,instAttrs){if(isLoop&&isAnonymous){return}
var ctx=!isAnonymous&&isLoop?this:parent||this;each(instAttrs,function(attr){if(attr.expr){updateAllExpressions.call(ctx,[attr.expr]);}
opts[toCamel(attr.name).replace(ATTRS_PREFIX,'')]=attr.expr?attr.expr.value:attr.value;});}
function Tag$1(impl,conf,innerHTML){if(impl===void 0)impl={};if(conf===void 0)conf={};var opts=extend({},conf.opts),parent=conf.parent,isLoop=conf.isLoop,isAnonymous=!!conf.isAnonymous,skipAnonymous=settings$1.skipAnonymousTags&&isAnonymous,item=cleanUpData(conf.item),index=conf.index,instAttrs=[],implAttrs=[],expressions=[],root=conf.root,tagName=conf.tagName||getTagName(root),isVirtual=tagName==='virtual',isInline=!isVirtual&&!impl.tmpl,propsInSyncWithParent=[],dom;if(!skipAnonymous){observable$1(this);}
if(impl.name&&root._tag){root._tag.unmount(true);}
this.isMounted=false;defineProperty(this,'__',{isAnonymous:isAnonymous,instAttrs:instAttrs,innerHTML:innerHTML,tagName:tagName,index:index,isLoop:isLoop,isInline:isInline,listeners:[],virts:[],tail:null,head:null,parent:null,item:null});defineProperty(this,'_riot_id',++__uid);defineProperty(this,'root',root);extend(this,{opts:opts},item);defineProperty(this,'parent',parent||null);defineProperty(this,'tags',{});defineProperty(this,'refs',{});if(isInline||isLoop&&isAnonymous){dom=root;}else{if(!isVirtual){root.innerHTML='';}
dom=mkdom(impl.tmpl,innerHTML,isSvg(root));}
defineProperty(this,'update',function tagUpdate(data){var nextOpts={},canTrigger=this.isMounted&&!skipAnonymous;data=cleanUpData(data);extend(this,data);updateOpts.apply(this,[isLoop,parent,isAnonymous,nextOpts,instAttrs]);if(canTrigger&&this.isMounted&&isFunction(this.shouldUpdate)&&!this.shouldUpdate(data,nextOpts)){return this}
if(isLoop&&isAnonymous){inheritFrom.apply(this,[this.parent,propsInSyncWithParent]);}
extend(opts,nextOpts);if(canTrigger){this.trigger('update',data);}
updateAllExpressions.call(this,expressions);if(canTrigger){this.trigger('updated');}
return this}.bind(this));defineProperty(this,'mixin',function tagMixin(){var this$1=this;each(arguments,function(mix){var instance,obj;var props=[];var propsBlacklist=['init','__proto__'];mix=isString(mix)?mixin$1(mix):mix;if(isFunction(mix)){instance=new mix();}else{instance=mix;}
var proto=Object.getPrototypeOf(instance);do{props=props.concat(Object.getOwnPropertyNames(obj||instance));}
while(obj=Object.getPrototypeOf(obj||instance))
each(props,function(key){if(!contains(propsBlacklist,key)){var descriptor=Object.getOwnPropertyDescriptor(instance,key)||Object.getOwnPropertyDescriptor(proto,key);var hasGetterSetter=descriptor&&(descriptor.get||descriptor.set);if(!this$1.hasOwnProperty(key)&&hasGetterSetter){Object.defineProperty(this$1,key,descriptor);}else{this$1[key]=isFunction(instance[key])?instance[key].bind(this$1):instance[key];}}});if(instance.init)
{instance.init.bind(this$1)();}});return this}.bind(this));defineProperty(this,'mount',function tagMount(){var this$1=this;root._tag=this;parseAttributes.apply(parent,[root,root.attributes,function(attr,expr){if(!isAnonymous&&RefExpr.isPrototypeOf(expr)){expr.tag=this$1;}
attr.expr=expr;instAttrs.push(attr);}]);implAttrs=[];walkAttrs(impl.attrs,function(k,v){implAttrs.push({name:k,value:v});});parseAttributes.apply(this,[root,implAttrs,function(attr,expr){if(expr){expressions.push(expr);}
else{setAttr(root,attr.name,attr.value);}}]);updateOpts.apply(this,[isLoop,parent,isAnonymous,opts,instAttrs]);var globalMixin=mixin$1(GLOBAL_MIXIN);if(globalMixin&&!skipAnonymous){for(var i in globalMixin){if(globalMixin.hasOwnProperty(i)){this$1.mixin(globalMixin[i]);}}}
if(impl.fn){impl.fn.call(this,opts);}
if(!skipAnonymous){this.trigger('before-mount');}
parseExpressions.apply(this,[dom,expressions,isAnonymous]);this.update(item);if(!isAnonymous&&!isInline){while(dom.firstChild){root.appendChild(dom.firstChild);}}
defineProperty(this,'root',root);defineProperty(this,'isMounted',true);if(skipAnonymous){return}
if(!this.parent){this.trigger('mount');}
else{var p=getImmediateCustomParentTag(this.parent);p.one(!p.isMounted?'mount':'updated',function(){this$1.trigger('mount');});}
return this}.bind(this));defineProperty(this,'unmount',function tagUnmount(mustKeepRoot){var this$1=this;var el=this.root,p=el.parentNode,ptag,tagIndex=__TAGS_CACHE.indexOf(this);if(!skipAnonymous){this.trigger('before-unmount');}
walkAttrs(impl.attrs,function(name){if(startsWith(name,ATTRS_PREFIX))
{name=name.slice(ATTRS_PREFIX.length);}
remAttr(root,name);});this.__.listeners.forEach(function(dom){Object.keys(dom[RIOT_EVENTS_KEY]).forEach(function(eventName){dom.removeEventListener(eventName,dom[RIOT_EVENTS_KEY][eventName]);});});if(tagIndex!==-1)
{__TAGS_CACHE.splice(tagIndex,1);}
if(p||isVirtual){if(parent){ptag=getImmediateCustomParentTag(parent);if(isVirtual){Object.keys(this.tags).forEach(function(tagName){arrayishRemove(ptag.tags,tagName,this$1.tags[tagName]);});}else{arrayishRemove(ptag.tags,tagName,this);if(parent!==ptag){arrayishRemove(parent.tags,tagName,this);}}}else{setInnerHTML(el,'');}
if(p&&!mustKeepRoot){p.removeChild(el);}}
if(this.__.virts){each(this.__.virts,function(v){if(v.parentNode){v.parentNode.removeChild(v);}});}
unmountAll(expressions);each(instAttrs,function(a){return a.expr&&a.expr.unmount&&a.expr.unmount();});if(this.__.onUnmount){this.__.onUnmount();}
if(!skipAnonymous){this.trigger('unmount');this.off('*');}
defineProperty(this,'isMounted',false);delete this.root._tag;return this}.bind(this));}
function getTag(dom){return dom.tagName&&__TAG_IMPL[getAttr(dom,IS_DIRECTIVE)||getAttr(dom,IS_DIRECTIVE)||dom.tagName.toLowerCase()]}
function inheritFrom(target,propsInSyncWithParent){var this$1=this;each(Object.keys(target),function(k){var mustSync=!isReservedName(k)&&contains(propsInSyncWithParent,k);if(isUndefined(this$1[k])||mustSync){if(!mustSync){propsInSyncWithParent.push(k);}
this$1[k]=target[k];}});}
function moveChildTag(tagName,newPos){var parent=this.parent,tags;if(!parent){return}
tags=parent.tags[tagName];if(isArray(tags))
{tags.splice(newPos,0,tags.splice(tags.indexOf(this),1)[0]);}
else{arrayishAdd(parent.tags,tagName,this);}}
function initChildTag(child,opts,innerHTML,parent){var tag=new Tag$1(child,opts,innerHTML),tagName=opts.tagName||getTagName(opts.root,true),ptag=getImmediateCustomParentTag(parent);defineProperty(tag,'parent',ptag);tag.__.parent=parent;arrayishAdd(ptag.tags,tagName,tag);if(ptag!==parent)
{arrayishAdd(parent.tags,tagName,tag);}
return tag}
function getImmediateCustomParentTag(tag){var ptag=tag;while(ptag.__.isAnonymous){if(!ptag.parent){break}
ptag=ptag.parent;}
return ptag}
function unmountAll(expressions){each(expressions,function(expr){if(expr instanceof Tag$1){expr.unmount(true);}
else if(expr.tagName){expr.tag.unmount(true);}
else if(expr.unmount){expr.unmount();}});}
function getTagName(dom,skipDataIs){var child=getTag(dom),namedTag=!skipDataIs&&getAttr(dom,IS_DIRECTIVE);return namedTag&&!tmpl.hasExpr(namedTag)?namedTag:child?child.name:dom.tagName.toLowerCase()}
function cleanUpData(data){if(!(data instanceof Tag$1)&&!(data&&isFunction(data.trigger)))
{return data}
var o={};for(var key in data){if(!RE_RESERVED_NAMES.test(key)){o[key]=data[key];}}
return o}
function arrayishAdd(obj,key,value,ensureArray,index){var dest=obj[key];var isArr=isArray(dest);var hasIndex=!isUndefined(index);if(dest&&dest===value){return}
if(!dest&&ensureArray){obj[key]=[value];}
else if(!dest){obj[key]=value;}
else{if(isArr){var oldIndex=dest.indexOf(value);if(oldIndex===index){return}
if(oldIndex!==-1){dest.splice(oldIndex,1);}
if(hasIndex){dest.splice(index,0,value);}else{dest.push(value);}}else{obj[key]=[dest,value];}}}
function arrayishRemove(obj,key,value,ensureArray){if(isArray(obj[key])){var index=obj[key].indexOf(value);if(index!==-1){obj[key].splice(index,1);}
if(!obj[key].length){delete obj[key];}
else if(obj[key].length===1&&!ensureArray){obj[key]=obj[key][0];}}else
{delete obj[key];}}
function mountTo(root,tagName,opts,ctx){var impl=__TAG_IMPL[tagName],implClass=__TAG_IMPL[tagName].class,tag=ctx||(implClass?Object.create(implClass.prototype):{}),innerHTML=root._innerHTML=root._innerHTML||root.innerHTML;var conf=extend({root:root,opts:opts},{parent:opts?opts.parent:null});if(impl&&root){Tag$1.apply(tag,[impl,conf,innerHTML]);}
if(tag&&tag.mount){tag.mount(true);if(!contains(__TAGS_CACHE,tag)){__TAGS_CACHE.push(tag);}}
return tag}
function makeReplaceVirtual(tag,ref){var frag=createFrag();makeVirtual.call(tag,frag);ref.parentNode.replaceChild(frag,ref);}
function makeVirtual(src,target){var this$1=this;var head=createDOMPlaceholder(),tail=createDOMPlaceholder(),frag=createFrag(),sib,el;this.root.insertBefore(head,this.root.firstChild);this.root.appendChild(tail);this.__.head=el=head;this.__.tail=tail;while(el){sib=el.nextSibling;frag.appendChild(el);this$1.__.virts.push(el);el=sib;}
if(target)
{src.insertBefore(frag,target.__.head);}
else
{src.appendChild(frag);}}
function moveVirtual(src,target){var this$1=this;var el=this.__.head,frag=createFrag(),sib;while(el){sib=el.nextSibling;frag.appendChild(el);el=sib;if(el===this$1.__.tail){frag.appendChild(el);src.insertBefore(frag,target.__.head);break}}}
function selectTags(tags){if(!tags){var keys=Object.keys(__TAG_IMPL);return keys+selectTags(keys)}
return tags.filter(function(t){return!/[^-\w]/.test(t);}).reduce(function(list,t){var name=t.trim().toLowerCase();return list+",["+IS_DIRECTIVE+"=\""+name+"\"]"},'')}
var tags=Object.freeze({getTag:getTag,inheritFrom:inheritFrom,moveChildTag:moveChildTag,initChildTag:initChildTag,getImmediateCustomParentTag:getImmediateCustomParentTag,unmountAll:unmountAll,getTagName:getTagName,cleanUpData:cleanUpData,arrayishAdd:arrayishAdd,arrayishRemove:arrayishRemove,mountTo:mountTo,makeReplaceVirtual:makeReplaceVirtual,makeVirtual:makeVirtual,moveVirtual:moveVirtual,selectTags:selectTags});var settings=settings$1;var util={tmpl:tmpl,brackets:brackets,styleManager:styleManager,vdom:__TAGS_CACHE,styleNode:styleManager.styleNode,dom:dom,check:check,misc:misc,tags:tags};var Tag$$1=Tag$2;var tag$$1=tag$1;var tag2$$1=tag2$1;var mount$$1=mount$1;var mixin$$1=mixin$1;var update$$1=update$1;var unregister$$1=unregister$1;var version$$1=version$1;var observable=observable$1;var riot$1=extend({},core,{observable:observable$1,settings:settings,util:util,});exports.settings=settings;exports.util=util;exports.Tag=Tag$$1;exports.tag=tag$$1;exports.tag2=tag2$$1;exports.mount=mount$$1;exports.mixin=mixin$$1;exports.update=update$$1;exports.unregister=unregister$$1;exports.version=version$$1;exports.observable=observable;exports['default']=riot$1;Object.defineProperty(exports,'__esModule',{value:true});})));